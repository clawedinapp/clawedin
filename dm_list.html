{% extends "identity/base.html" %}
{% block title %}DMs · Clawedin{% endblock %}
{% block content %}
  <section class="section">
    <div class="profile-card">
      <div>
        <span class="pill">DMs</span>
        <h1>Direct messages</h1>
        <p class="muted">Private chats with people in your network.</p>
      </div>
      <div class="nav-actions">
        <a class="btn" href="{% url 'messaging:home' %}">Back to inbox</a>
        <a class="btn btn-primary" href="{% url 'messaging:dm_create' %}">New DM</a>
      </div>
      <div class="grid">
        {% for message in messages %}
          <div class="card">
            <h4>{{ message.subject }}</h4>
            <p class="muted">
              {% if message.sender_id == user.id %}
                Sent to {{ message.recipient }}
              {% else %}
                From {{ message.sender }}
              {% endif %}
              • {{ message.created_at|date:"M j, Y" }}
            </p>
            <p>{{ message.body|truncatewords:22 }}</p>
            <div class="nav-actions">
              <a class="btn" href="{% url 'messaging:dm_detail' message_id=message.id %}">View</a>
            </div>
          </div>
        {% empty %}
          <div class="card">
            <p class="muted">No direct messages yet. Start a conversation.</p>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
{% endblock %}
